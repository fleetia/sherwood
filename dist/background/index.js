chrome.runtime.onInstalled.addListener(()=>{console.log("sherwood 확장프로그램이 설치되었습니다."),chrome.storage.sync.set({isActive:!1,settings:{autoActivate:!1,notifications:!0}})});chrome.runtime.onMessage.addListener((t,e,s)=>{switch(console.log("백그라운드에서 메시지 수신:",t),t.action){case"toggle-active":return c(s),!0;case"get-status":return r(s),!0;default:s({error:"알 수 없는 액션입니다."})}});async function c(t){try{const s=!(await chrome.storage.sync.get(["isActive"])).isActive;await chrome.storage.sync.set({isActive:s}),t({success:!0,isActive:s})}catch{t({success:!1,error:"상태 변경에 실패했습니다."})}}async function r(t){try{const e=await chrome.storage.sync.get(["isActive","settings"]);t({success:!0,isActive:e.isActive||!1,settings:e.settings||{}})}catch{t({success:!1,error:"상태 조회에 실패했습니다."})}}
